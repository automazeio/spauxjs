!function(spaux,undefined){const fetchToFrame=(url,target,append=!1,{method:method="get",callback:callback}={})=>{url=new URL(url,document.location.href).href;const targetSelector=":root"===target?":root":`#${target}`,targetElement=document.querySelector(targetSelector);targetElement.setAttribute("aria-busy",!0),targetElement.setAttribute("aria-label","Loading...");const postFetch=()=>{callback&&callback(),attachEvents()},eventInfo={detail:{url:url,method:method,target:target}};window.dispatchEvent(new CustomEvent("spaux:prefetch",eventInfo)),fetch(url,{method:method}).then(response=>response.text()).then(html=>{if(html=html.replace(/(\s|\n)(const|let) /gim," var "),":root"===target)return spaux.placeHTML(html,":root").then(postFetch),document.querySelector(":root").setAttribute("aria-busy",!1),document.querySelector(":root").removeAttribute("aria-label"),void window.dispatchEvent(new CustomEvent("spaux:postfetch",eventInfo));if(!targetElement)return void console.error(`target ${target} not found`);if(!append&&url!==document.location.href){const headRegex=/<head>((.|\n)*)<\/head>/gim;let m=headRegex.exec(html);null!==m&&spaux.placeHTML(m[1].trim(),"head").then(()=>{})}let contentRegex=new RegExp(`<(\\w+) id="${target}">((.|\\n)*)`,"gmi");if(m=contentRegex.exec(html),null===m)contentRegex=/<body((.|\n)*)?>((.|\n)*)<\/body>/gim,m=contentRegex.exec(html),null!==m&&(html=m[0]);else{const tag=m[1];contentRegex=new RegExp(`^(<${tag} id="${target}">((.|\\n)*)</${tag}>)|</${tag}>$`,"gmi"),m=contentRegex.exec(m[0]),html=`${m.slice(-2)[0]}`.split(`</${tag}>`).slice(0,-1).join(`</${tag}>`)}spaux.placeHTML(html,targetSelector,append).then(postFetch),targetElement.setAttribute("aria-busy",!1),targetElement.removeAttribute("aria-label"),window.dispatchEvent(new CustomEvent("spaux:postfetch",eventInfo))}).catch(error=>{console.log(error),targetElement.setAttribute("aria-busy",!1),targetElement.removeAttribute("aria-label"),window.dispatchEvent(new CustomEvent("spaux:postfetch",eventInfo))})},onClick=event=>{event.preventDefault();const el=event.target,target=el.getAttribute("data-spaux-target")||":root",method=el.getAttribute("data-spaux-method")||"get",append=el.hasAttribute("data-spaux-append")&&"false"!==el.getAttribute("data-spaux-append"),render=!el.hasAttribute("data-spaux-render")||"false"!==el.getAttribute("data-spaux-render"),cache=!el.hasAttribute("data-spaux-cache")||"false"!==el.getAttribute("data-spaux-cache"),url=new URL(el.getAttribute("href"),document.location.href).href;if(!render)return void fetch(url,{method:method}).then(response=>{console.log(response)}).catch(error=>{console.error(error)});const targetSelector=document.querySelector(":root"===target?target:`#${target}`),state={title:document.title,html:targetSelector.innerHTML.trim(),method:method,target:target,cache:cache,url:document.location.href,scrollY:window.scrollY,scrollX:window.scrollX};fetchToFrame(url,target,append,{method:method,callback:()=>{const changeInterval=setInterval(()=>{""!==targetSelector.innerHTML&&state.html!==targetSelector.innerHTML.trim()&&(clearInterval(changeInterval),state.html=targetSelector.innerHTML.trim(),state.url=url,append&&url==document.location.href?history.replaceState(state,url,url):history.pushState(state,url,url))},1)}})},onSubmit=event=>{event.preventDefault();const el=event.target,target=el.getAttribute("data-spaux-target")||el.getAttribute("data-spaux-id"),append=el.hasAttribute("data-spaux-append")&&"false"!==el.getAttribute("data-spaux-append");let targetSelector=":root"===target?target:`#${target}`;target===el.getAttribute("data-spaux-id")&&(targetSelector=`[data-spaux-id="${target}"]`);const callback=window[el.getAttribute("data-spaux-callback")]||function(){el.reset()};fetch(el.action,{method:el.method||"post",body:new URLSearchParams(new FormData(el))}).then(response=>response.text()).then(html=>{""!==html?spaux.placeHTML(html,targetSelector,append).then(()=>{callback(el),console.info("form replaced")}):callback(el)}).catch(error=>{console.error("Error:",error)})};spaux.remoteResources=[];const _htmlToElements=function(html){var template=document.createElement("template");template.innerHTML=html;const nodes=template.content.childNodes,nodesArray=[],scriptsArray=[];for(var i in nodes)1==nodes[i].nodeType&&("SCRIPT"===nodes[i].nodeName?scriptsArray.push(nodes[i]):nodesArray.push(nodes[i]));return nodesArray.concat(scriptsArray)},_loadContent=function(data,index,container,appendData){var item,minified;if(0!==index||appendData||(document.querySelector(container).innerHTML=""),!(index<=data.length))return!0;var element=data[index];void 0!==element&&"SCRIPT"==element.nodeName?(item=document.createElement(element.nodeName.toLowerCase()),element.type&&(item.type=element.type),Array.prototype.forEach.call(element.attributes,(function(attr){item.setAttribute(attr.nodeName,attr.nodeValue)})),""!=element.src?(spaux.remoteResources.push(element.src),item.src=element.src,item.onload=function(){_loadContent(data,index+1,container)},document.head.appendChild(item)):(minified=element.text.replace(/[^a-z0-9]/gim,""),spaux.remoteResources.push(minified),item.text=element.text,document.body.appendChild(item),_loadContent(data,index+1,container))):void 0!==element&&"LINK"==element.nodeName&&"stylesheet"==element.rel?(item=document.createElement(element.nodeName.toLowerCase()),element.type&&(item.type=element.type),Array.prototype.forEach.call(element.attributes,(function(attr){item.setAttribute(attr.nodeName,attr.nodeValue)})),!1===spaux.remoteResources.includes(element.href)?(spaux.remoteResources.push(element.href),item.href=element.href,item.onload=function(){_loadContent(data,index+1,container)},document.head.appendChild(item)):_loadContent(data,index+1,container)):(void 0!==element&&document.querySelector(container).appendChild(element),_loadContent(data,index+1,container))},attachEvents=element=>{(element=element||document).querySelectorAll("a:not([data-spaux-disable])").forEach(el=>{el.removeEventListener("click",onClick),el.addEventListener("click",onClick)}),element.querySelectorAll("form:not([data-spaux-disable])").forEach(el=>{el.setAttribute("data-spaux-id",`spaux#${Math.random().toString(36).substring(2)}`),el.removeEventListener("submit",onSubmit),el.addEventListener("submit",onSubmit)})};spaux.init=()=>{localStorage.setItem("originalState",JSON.stringify({title:document.title,html:document.querySelector("body").innerHTML.trim()})),spaux.attachEvents(),window.addEventListener("popstate",event=>{event.preventDefault();let targetSelector=":root";if(null!==event.state)event.state&&(targetSelector=`#${event.state.target}`,event.state.cache?spaux.placeHTML(event.state.html,targetSelector).then(()=>{window.scrollTo(event.state.scrollX,event.state.scrollY),document.title=event.state.title}):fetchToFrame(event.state.url,event.state.target,!1,{method:event.state.method,callback:()=>{window.scrollTo(event.state.scrollX,event.state.scrollY),document.title=event.state.title}})),document.querySelector(targetSelector).querySelectorAll("a:not([data-spaux-disable])").forEach(el=>{el.addEventListener("click",onClick)}),document.querySelector(targetSelector).querySelectorAll("form:not([data-spaux-disable])").forEach(el=>{attachOnSubmit(el)});else if(localStorage.getItem("originalState")){const originalState=JSON.parse(localStorage.getItem("originalState"));document.title=originalState.title,spaux.placeHTML(originalState.html,"body").then(()=>{})}})},document.addEventListener("DOMContentLoaded",()=>{spaux.init()}),spaux.placeHTML=async function(data,container,appendData=!1){return data="<"===data.trim().substring(0,1)?data:`<div>${data}</div>`,_loadContent(_htmlToElements(data),0,container,appendData)}}(window.spaux=window.spaux||{});